<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GestiÃ³n de Panificados - POO</title>

    <link rel="stylesheet" href="styles.css" />

    <!-- MÃ³dulo principal del sistema -->
    <script type="module" src="poo/sistema.js"></script>
</head>

<body>
    <!-- ==========================================
               HEADER / CONTROLES PRINCIPALES
    ============================================ -->
    <header>
        <h1>Sistema de GestiÃ³n de Panificados</h1>
        <img src="logo.webp" alt="Logo Panificados" class="logo-app">

        <section id="panelControles" class="header-actions">

            <button id="togglePreciosBtn">Mostrar/ocultar precios</button>

            <button id="addStockBtn">Agregar nuevo producto</button>

            <button onclick="location.href='estadisticas.html'">Ver estadÃ­sticas</button>

            <button id="exportarPDFBtn">ğŸ“„ Exportar PDF</button>

            <button id="cierreDiaBtn">Cierre del dÃ­a</button>

            <button id="cerrarSesionBtn">Cerrar sesiÃ³n</button>

            <button id="abrirGuiaBtn">â” GuÃ­a de uso</button>

            <button id="toggleThemeBtn">ğŸŒ™ Modo oscuro</button>
        </section>
    </header>

    <!-- ==========================================
                     CONTENIDO PRINCIPAL
    ============================================ -->
    <main>

        <!-- PRODUCTOS -->
        <section id="productosSection" class="chart-card">
            <h2>Productos</h2>
            <div id="productosContainer"></div>
        </section>

        <!-- CREAR PRODUCTO -->
        <section id="formularioNuevoProducto" class="panel-form chart-card">
            <h3>Crear nuevo producto</h3>

            <label>Nombre:
                <input id="nombreInput" type="text" placeholder="(Nombre del producto)">
            </label>

            <label>Precio costo:
                <input id="precioCostoInput" type="number" step="0.01" placeholder="(Precio de costo)">
            </label>

            <label>Precio venta:
                <input id="precioVentaInput" type="number" step="0.01" placeholder="(Precio al pÃºblico)">
            </label>

            <label>CategorÃ­a:
                <select id="categoriaNueva"></select>
            </label>

            <label>Agregar categorÃ­a:
                <input id="categoriaAgregar" type="text" placeholder="Nueva categorÃ­a">
                <button id="btnAgregarCategoria">Agregar</button>
            </label>

            <label>Stock inicial:
                <input id="stockInput" type="number" placeholder="Cantidad inicial">
            </label>

            <label>MÃ­nimo deseado:
                <input id="minimoDeseado" type="number" placeholder="Cantidad mÃ­nima deseada">
            </label>

            <button id="btnCrearProducto">Crear producto</button>
        </section>

        <!-- TOTALES -->
        <section id="totalesSection" class="chart-card">
            <h2>Totales</h2>
            <div id="totalesContainer"></div>
        </section>

        <!-- TURNOS -->
        <section id="turnosSection" class="chart-card">
            <h2>ConfiguraciÃ³n de turnos</h2>

            <label>MaÃ±ana inicio:
                <input type="time" id="inicioManana">
            </label>

            <label>MaÃ±ana fin:
                <input type="time" id="finManana">
            </label>

            <label>Tarde inicio:
                <input type="time" id="inicioTarde">
            </label>

            <label>Tarde fin:
                <input type="time" id="finTarde">
            </label>
        </section>

    </main>

    <footer>
        <p>&copy; 2025 - Cristian Daniel Altamiranda</p>
    </footer>

    <!-- ==========================================
                    MODAL: GUÃA DE USO
    ============================================ -->

    <div id="modalGuia" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modalGuiaTitle">
        <div class="modal-content">

            <button class="modal-close" id="modalGuiaClose" aria-label="Cerrar guÃ­a">âœ–</button>

            <h2 id="modalGuiaTitle">ğŸŸ¦ GuÃ­a rÃ¡pida de uso</h2>

            <div class="modal-body">
                <pre>
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸŸ¦ GUÃA COMPLETA DE USO DEL SISTEMA DE PANIFICADOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Œ IMPORTANTE SOBRE EL ALMACENAMIENTO
Toda la informaciÃ³n (productos, ventas, totales, estadÃ­sticas y turnos)
SE GUARDA en el LocalStorage del dispositivo actual.

âœ” Esto significa que:
- Tus datos quedan guardados aunque cierres la pÃ¡gina.
- NO se sincronizan entre dispositivos.
- Lo que cargues en un telÃ©fono, NO aparecerÃ¡ en una PC diferente.
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¤ 1. INICIO DE SESIÃ“N
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Usuarios disponibles:
â€¢ admin â€” contraseÃ±a: 1234
â€¢ vendedor â€” contraseÃ±a: 1234

Puede:
âœ“ Crear productos  
âœ“ Editar / Eliminar productos
âœ“ Vender productos
âœ“ Devolver ventas 
âœ“ Ver estadÃ­sticas  
âœ“ Realizar cierre del dÃ­a  
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¦ 2. CREACIÃ“N DE PRODUCTOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1) Nombre â€“ costo â€“ venta  
2) Elegir categorÃ­a  
3) Si NO existe:
   - Escribirla
   - Presionar **Agregar categorÃ­a**
   âš  ENTER guarda el producto directo  
4) Stock inicial  
5) MÃ­nimo deseado (para alertas)  
6) Crear producto  
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¥ 3. SUMAR STOCK
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
BotÃ³n â€œSumar stockâ€:
â€¢ Aumenta stock
â€¢ Afecta costo del dÃ­a
â€¢ Afecta venta esperada del dÃ­a
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ›’ 4. VENTAS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Al vender:
â€¢ Baja stock  
â€¢ Sube ingresos  
â€¢ Sube ganancia  
â€¢ Se asigna turno  
â€¢ Actualiza estadÃ­sticas  
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”„ 5. DEVOLUCIONES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Solo del dÃ­a ACTUAL.  
DespuÃ©s del cierre: no se pueden devolver.
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”” 6. ALERTAS DE STOCK
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸŸ¥ Bajo  
ğŸŸ¨ Cerca del mÃ­nimo  
ğŸŸ© Correcto  
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š 7. ESTADÃSTICAS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Incluye:
â€¢ Resumen rÃ¡pido  
â€¢ Acumulado mensual  
â€¢ GrÃ¡ficos del dÃ­a  
â€¢ GrÃ¡ficos del mes  
â€¢ Top productos  
â€¢ Ventas por categorÃ­a  
â€¢ Tablas del dÃ­a  
â€¢ Historial dÃ­a por dÃ­a  
â€¢ Exportaciones CSV / PDF  
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“… 8. CIERRE DEL DÃA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Al cerrar:
âœ” Guarda registro inalterable  
âœ” Pone en cero valores del dÃ­a  
âœ” Mantiene stock  
âœ” Mantiene venta esperada si hay stock  
âœ” Actualiza mes  
âœ” No pasa al dÃ­a siguiente hasta 23:59  
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸŒ™ 9. MODO OSCURO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ AutomÃ¡tico segÃºn hora  
â€¢ Manual  
â€¢ Guarda preferencia  
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ” FIN DE LA GUÃA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
</pre>
            </div>
        </div>
    </div>

    <!-- ==========================================
                    SCRIPT: MODO OSCURO
    ============================================ -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {

            const btn = document.getElementById("toggleThemeBtn");

            const guardado = localStorage.getItem("darkMode");
            const activar =
                guardado === null
                    ? (new Date().getHours() >= 19 || new Date().getHours() < 7)
                    : (guardado === "true");

            if (activar) {
                document.body.classList.add("dark");
                btn.textContent = "â˜€ï¸ Modo claro";
            }

            btn.addEventListener("click", () => {
                document.body.classList.toggle("dark");
                const dark = document.body.classList.contains("dark");
                localStorage.setItem("darkMode", dark);
                btn.textContent = dark ? "â˜€ï¸ Modo claro" : "ğŸŒ™ Modo oscuro";
            });
        });
    </script>

    <!-- ==========================================
                 SCRIPT: MODAL GUÃA
    ============================================ -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {

            const abrir = document.getElementById("abrirGuiaBtn");
            const cerrar = document.getElementById("modalGuiaClose");
            const modal = document.getElementById("modalGuia");

            function abrirModal() {
                modal.style.display = "flex";
                modal.setAttribute("aria-hidden", "false");
                document.documentElement.style.overflow = "hidden"; // bloquear scroll
            }

            function cerrarModal() {
                modal.style.display = "none";
                modal.setAttribute("aria-hidden", "true");
                document.documentElement.style.overflow = ""; // restaurar scroll
            }

            abrir.addEventListener("click", abrirModal);
            cerrar.addEventListener("click", cerrarModal);

            modal.addEventListener("click", (ev) => {
                if (ev.target === modal) cerrarModal();
            });

            // Cerrar con ESC
            document.addEventListener("keydown", (ev) => {
                if (ev.key === "Escape") cerrarModal();
            });
        });
    </script>

    <!-- Sistema adicional -->
    <script type="module" src="app-poo.js"></script>
</body>
</html>
