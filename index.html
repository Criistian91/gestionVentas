<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gesti√≥n de Panificados - POO</title>

    <link rel="stylesheet" href="styles.css" />

    <!-- Chart.js SOLO si el index usa gr√°ficos -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->

    <!-- NO cargar jsPDF aqu√≠ (no se usa en el index) -->

    <!-- Sistema principal -->
    <script type="module" src="poo/sistema.js"></script>
</head>

<body>
    <header>
        <h1>Sistema de Gesti√≥n de Panificados</h1>
        <section id="panelControles">
            <button id="togglePreciosBtn">Mostrar/ocultar precios</button>
            <button id="addStockBtn">Agregar nuevo producto</button>
            <button onclick="location.href='estadisticas.html'">Ver estad√≠sticas</button>
            <button id="exportarPDFBtn">üìÑ Exportar PDF</button>
            <button id="cerrarSesionBtn">Cerrar sesi√≥n</button>
            <button id="cierreDiaBtn">Cierre del d√≠a</button>
            <button id="toggleThemeBtn">üåô Modo oscuro</button>
        </section>
    </header>

    <section id="productosSection">
        <h2>Productos</h2>
        <div id="productosContainer"></div>
    </section>

    <section id="formularioNuevoProducto" class="panel-form">
        <h3>Crear nuevo producto</h3>
        <label>Nombre:
            <input id="nombreInput" type="text" placeholder="(Nombre del producto)">
        </label>
        <label>Precio costo:
            <input id="precioCostoInput" type="number" step="0.01" placeholder=" (Precio de costo)">
        </label>
        <label>Precio venta:
            <input id="precioVentaInput" type="number" step="0.01" placeholder=" (Precio al p√∫blico)">
        </label>
        <label>Categor√≠a:
            <select id="categoriaNueva"></select>
        </label>
        <label>Agregar categor√≠a:
            <input id="categoriaAgregar" type="text" placeholder="Nueva categor√≠a + Agregar ‚Üí">
            <button id="btnAgregarCategoria">Agregar</button>
        </label>
        <label>Stock inicial:
            <input id="stockInput" type="number" placeholder="Cantidad inicial">
        </label>

        <label>M√≠nimo deseado:
            <input type="number" id="minimoDeseado" placeholder="Cantidad m√≠nima deseada">
        </label>
        <!-- <label>Es perecedero:
            <input id="perecederoInput" type="checkbox">
        </label>
        <label>D√≠as hasta vencimiento:
            <input id="diasVencimientoInput" type="number">
        </label> -->

        <button id="btnCrearProducto">Crear producto</button>
    </section>

    <section id="totalesSection">
        <h2>Totales</h2>
        <div id="totalesContainer"></div>
    </section>

    <!-- <section id="alertasSection">
        <h2>Alertas de stock</h2>
        <div id="alertasContainer"></div>
    </section> -->

    <section id="turnosSection">
        <h2>Configuraci√≥n de turnos</h2>
        <label>Ma√±ana inicio:<input type="time" id="inicioManana"></label>
        <label>Ma√±ana fin:<input type="time" id="finManana"></label>
        <label>Tarde inicio:<input type="time" id="inicioTarde"></label>
        <label>Tarde fin:<input type="time" id="finTarde"></label>
    </section>

    <footer>
        <p>&copy; 2025 - Cristian Daniel Altamiranda</p>
    </footer>

    <script>
    // Tema simple (suave) ‚Äî guarda preferencia
    document.addEventListener("DOMContentLoaded", () => {
        const btn = document.getElementById("toggleThemeBtn");
        document.body.style.transition = "background-color 0.35s ease, color 0.35s ease";

        function activarSegunHora() {
            const hora = new Date().getHours();
            return (hora >= 19 || hora < 7);
        }

        let darkGuardado = localStorage.getItem("darkMode");
        let activarDark = false;

        if (darkGuardado === null) {
            activarDark = activarSegunHora();
            localStorage.setItem("darkMode", activarDark);
        } else {
            activarDark = (darkGuardado === "true");
        }

        if (activarDark) {
            document.body.classList.add("dark");
            if (btn) btn.textContent = "‚òÄÔ∏è Modo claro";
        } else {
            if (btn) btn.textContent = "üåô Modo oscuro";
        }

        if (btn) btn.addEventListener("click", () => {
            document.body.classList.toggle("dark");
            const dark = document.body.classList.contains("dark");
            localStorage.setItem("darkMode", dark);
            btn.textContent = dark ? "‚òÄÔ∏è Modo claro" : "üåô Modo oscuro";
            // emitir evento para que charts permitan recolor (si implement√°s)
            document.dispatchEvent(new Event('themeChanged'));
        });
    });
    </script>

    <script type="module" src="app-poo.js"></script>
</body>
</html>
